<style>
    .footer a[href*="github.com"] {
        display: none;
    }
</style><!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<body>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js"></script>

    <script>

        const firebaseConfig = {
          apiKey: "AIzaSyBZvsBcAoIJLbQc4yINQz78oyCovB4RDTA",
          authDomain: "praximai-438817.firebaseapp.com",
          projectId: "praximai-438817",
          storageBucket: "praximai-438817.appspot.com",
          messagingSenderId: "274586621759",
          appId: "1:274586621759:web:b9f20b3da3329327eba58a",
          measurementId: "G-EQ7HTDC8T3"
        };
        firebase.initializeApp(firebaseConfig);
    </script>
    
    <input type="file" id="fileInput" accept="application/pdf">
    <button id="uploadButton" onclick="document.getElementById('fileInput').click();">Choose PDF</button>
    <button onclick="uploadPDF()">Upload PDF</button>

    <script>
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                window.location.href = "../";
            }
        });

        window.logOut = function() {
            signOut(auth).then(() => {
                window.location.href = "../";
            }).catch((error) => {
                console.error("Error during logout", error);
            });
        };
    </script>
    <script>
        let selectedFile = null;
    
        document.getElementById('fileInput').addEventListener('change', (event) => {
          selectedFile = event.target.files[0];
          if (selectedFile) {
            document.getElementById('uploadButton').innerText = 'PDF Selected';
          }
        });
    
        async function uploadPDF() {
          if (!selectedFile) {
            alert("Please choose a file first.");
            return;
          }
    
          try {
            const user = firebase.auth().currentUser;
            if (!user) {
              throw new Error("User is not authenticated.");
            }
            
            const userId = user.uid;
            const storageRef = firebase.storage().ref(`pdfs/${userId}/${selectedFile.name}`);
            await storageRef.put(selectedFile);
    
            // Optional: Store metadata in Firestore
            const db = firebase.firestore();
            await db.collection('pdfs').doc(userId).set({
              [selectedFile.name]: storageRef.fullPath
            }, { merge: true });
    
            alert("File uploaded successfully.");
          } catch (error) {
            console.error("Error uploading file:", error);
            alert("Failed to upload file.");
          }
        }
    </script>
</body>
</html>
